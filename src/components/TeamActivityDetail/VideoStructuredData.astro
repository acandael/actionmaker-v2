---
export interface Props {
  videoUrl: string;
  title: string;
  description: string;
  thumbnailUrl?: string;
  uploadDate: string; // ISO 8601 date format
}

const { videoUrl, title, description, thumbnailUrl, uploadDate } = Astro.props;

// Create the structured data object
const structuredData = {
  '@context': 'https://schema.org',
  '@type': 'VideoObject',
  name: title,
  description: description,
  uploadDate: uploadDate,
  embedUrl: videoUrl,
  contentUrl: videoUrl.replace('/embed/', '/'), // Direct URL to the video
  thumbnailUrl: thumbnailUrl || '',
  duration: 'PT0M', // This should be dynamically set if duration is available
  potentialAction: {
    '@type': 'SeekToAction',
    target: `${videoUrl}?t={seek_to_second_number}`,
    'startOffset-input': 'required name=seek_to_second_number',
  },
  // Add required accessibility features
  accessibilityFeatures: ['captions', 'autoplay'],
  // Add required encoding information
  encodingFormat: 'video/mp4',
};
---

<script type="application/ld+json" set:html={JSON.stringify(structuredData)} />
