---
import { localizePath } from 'astro-i18next';
import i18next from 'i18next';

interface Category {
  id: string;
  title: string;
  description: string;
}

interface Props {
  categories: Category[];
  selectedCategory: string | null;
}

const { categories, selectedCategory } = Astro.props;
const currentLocale = i18next.language;

// Get clean category ID without locale prefix
const getCleanCategoryId = (id: string) => {
  return id.replace(`${currentLocale}/`, '');
};
---

<div class="flex flex-wrap justify-center gap-4 mb-16">
  <a
    href={localizePath('/teambuildings#activities-section')}
    class:list={[
      'px-4 py-2 rounded-full border transition-colors',
      !selectedCategory
        ? 'bg-red-600 text-white border-red-600'
        : 'border-gray-200 hover:border-red-600 hover:text-red-600',
    ]}
  >
    Alle activiteiten
  </a>
  {
    categories.map((category) => {
      const cleanId = getCleanCategoryId(category.id);
      return (
        <a
          href={localizePath(`/teambuildings?category=${cleanId}#activities-section`)}
          class:list={[
            'px-4 py-2 rounded-full border transition-colors',
            selectedCategory === cleanId
              ? 'bg-red-600 text-white border-red-600'
              : 'border-gray-200 hover:border-red-600 hover:text-red-600',
          ]}
        >
          {category.title}
        </a>
      );
    })
  }
</div>
