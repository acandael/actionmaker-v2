import{r as s,R as M,c as T}from"./index.CUiTgGaH.js";import{j as R}from"./index.BZtLbnUN.js";import{u as P,S as I}from"./index.DcrLtNVA.js";function V(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}function z(e,t=[]){let n=[];function r(c,i){const l=s.createContext(i),u=n.length;n=[...n,i];const a=d=>{const{scope:C,children:m,...f}=d,S=C?.[e]?.[u]||l,x=s.useMemo(()=>f,Object.values(f));return R.jsx(S.Provider,{value:x,children:m})};a.displayName=c+"Provider";function p(d,C){const m=C?.[e]?.[u]||l,f=s.useContext(m);if(f)return f;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${c}\``)}return[a,p]}const o=()=>{const c=n.map(i=>s.createContext(i));return function(l){const u=l?.[e]||c;return s.useMemo(()=>({[`__scope${e}`]:{...l,[e]:u}}),[l,u])}};return o.scopeName=e,[r,_(o,...t)]}function _(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(c){const i=r.reduce((l,{useScope:u,scopeName:a})=>{const d=u(c)[`__scope${a}`];return{...l,...d}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function w(e,t=[]){let n=[];function r(c,i){const l=s.createContext(i),u=n.length;n=[...n,i];function a(d){const{scope:C,children:m,...f}=d,S=C?.[e][u]||l,x=s.useMemo(()=>f,Object.values(f));return R.jsx(S.Provider,{value:x,children:m})}function p(d,C){const m=C?.[e][u]||l,f=s.useContext(m);if(f)return f;if(i!==void 0)return i;throw new Error(`\`${d}\` must be used within \`${c}\``)}return a.displayName=c+"Provider",[a,p]}const o=()=>{const c=n.map(i=>s.createContext(i));return function(l){const u=l?.[e]||c;return s.useMemo(()=>({[`__scope${e}`]:{...l,[e]:u}}),[l,u])}};return o.scopeName=e,[r,b(o,...t)]}function b(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(c){const i=r.reduce((l,{useScope:u,scopeName:a})=>{const d=u(c)[`__scope${a}`];return{...l,...d}},{});return s.useMemo(()=>({[`__scope${t.scopeName}`]:i}),[i])}};return n.scopeName=t.scopeName,n}function G(e){const t=e+"CollectionProvider",[n,r]=w(t),[o,c]=n(t,{collectionRef:{current:null},itemMap:new Map}),i=m=>{const{scope:f,children:S}=m,x=M.useRef(null),N=M.useRef(new Map).current;return R.jsx(o,{scope:f,itemMap:N,collectionRef:x,children:S})};i.displayName=t;const l=e+"CollectionSlot",u=M.forwardRef((m,f)=>{const{scope:S,children:x}=m,N=c(l,S),v=P(f,N.collectionRef);return R.jsx(I,{ref:v,children:x})});u.displayName=l;const a=e+"CollectionItemSlot",p="data-radix-collection-item",d=M.forwardRef((m,f)=>{const{scope:S,children:x,...N}=m,v=M.useRef(null),h=P(f,v),A=c(a,S);return M.useEffect(()=>(A.itemMap.set(v,{ref:v,...N}),()=>void A.itemMap.delete(v))),R.jsx(I,{[p]:"",ref:h,children:x})});d.displayName=a;function C(m){const f=c(e+"CollectionConsumer",m);return M.useCallback(()=>{const x=f.collectionRef.current;if(!x)return[];const N=Array.from(x.querySelectorAll(`[${p}]`));return Array.from(f.itemMap.values()).sort((A,O)=>N.indexOf(A.ref.current)-N.indexOf(O.ref.current))},[f.collectionRef,f.itemMap])}return[{Provider:i,Slot:u,ItemSlot:d},C,r]}var g=globalThis?.document?s.useLayoutEffect:()=>{},$=T.useId||(()=>{}),U=0;function J(e){const[t,n]=s.useState($());return g(()=>{n(r=>r??String(U++))},[e]),t?`radix-${t}`:""}function y(e){const t=s.useRef(e);return s.useEffect(()=>{t.current=e}),s.useMemo(()=>(...n)=>t.current?.(...n),[])}function K({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,o]=D({defaultProp:t,onChange:n}),c=e!==void 0,i=c?e:r,l=y(n),u=s.useCallback(a=>{if(c){const d=typeof a=="function"?a(e):a;d!==e&&l(d)}else o(a)},[c,e,o,l]);return[i,u]}function D({defaultProp:e,onChange:t}){const n=s.useState(e),[r]=n,o=s.useRef(r),c=y(t);return s.useEffect(()=>{o.current!==r&&(c(r),o.current=r)},[r,o,c]),n}var L=s.createContext(void 0);function Q(e){const t=s.useContext(L);return e||t||"ltr"}function j(e,t){return s.useReducer((n,r)=>t[n][r]??n,e)}var k=e=>{const{present:t,children:n}=e,r=W(t),o=typeof n=="function"?n({present:r.isPresent}):s.Children.only(n),c=P(r.ref,F(o));return typeof n=="function"||r.isPresent?s.cloneElement(o,{ref:c}):null};k.displayName="Presence";function W(e){const[t,n]=s.useState(),r=s.useRef({}),o=s.useRef(e),c=s.useRef("none"),i=e?"mounted":"unmounted",[l,u]=j(i,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return s.useEffect(()=>{const a=E(r.current);c.current=l==="mounted"?a:"none"},[l]),g(()=>{const a=r.current,p=o.current;if(p!==e){const C=c.current,m=E(a);e?u("MOUNT"):m==="none"||a?.display==="none"?u("UNMOUNT"):u(p&&C!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,u]),g(()=>{if(t){let a;const p=t.ownerDocument.defaultView??window,d=m=>{const S=E(r.current).includes(m.animationName);if(m.target===t&&S&&(u("ANIMATION_END"),!o.current)){const x=t.style.animationFillMode;t.style.animationFillMode="forwards",a=p.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=x)})}},C=m=>{m.target===t&&(c.current=E(r.current))};return t.addEventListener("animationstart",C),t.addEventListener("animationcancel",d),t.addEventListener("animationend",d),()=>{p.clearTimeout(a),t.removeEventListener("animationstart",C),t.removeEventListener("animationcancel",d),t.removeEventListener("animationend",d)}}else u("ANIMATION_END")},[t,u]),{isPresent:["mounted","unmountSuspended"].includes(l),ref:s.useCallback(a=>{a&&(r.current=getComputedStyle(a)),n(a)},[])}}function E(e){return e?.animationName||"none"}function F(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}export{k as P,J as a,V as b,z as c,g as d,G as e,Q as f,y as g,K as u};
