import{j as e}from"./index.tn-mf8pH.js";import{r as p}from"./index.BYPca8jv.js";import{o as f,s,u as v,C as b,F as y,a as n,b as a,d as t,I as l,c as i,e as c,T as N,B as S,A as w}from"./textarea.DJ8XwjrJ.js";import{u as j}from"./index.RD-eBZF-.js";import"./index.DoiFt7lv.js";const F=f({activityTitle:s(),firstName:s().min(2,{error:"Voornaam moet minimaal 2 karakters bevatten"}),lastName:s().min(2,{error:"Achternaam moet minimaal 2 karakters bevatten"}),email:s().email({error:"Ongeldig e-mailadres"}),phone:s().min(10,{error:"Ongeldig telefoonnummer"}),date:s().min(1,{error:"Datum is verplicht"}),groupSize:s().min(1,{error:"Aantal personen is verplicht"}),hours:s().min(1,{error:"Aantal uren is verplicht"}),budget:s().optional(),location:s().optional(),message:s().optional()}),k=async h=>{try{const d=await F.safeParseAsync(h);if(d.success)return{values:d.data,errors:{}};{const m={};return d.error.issues.forEach(r=>{const x=r.path.join(".");m[x]={type:r.code,message:r.message}}),{values:{},errors:m}}}catch{return{values:{},errors:{root:{type:"unknown",message:"An unknown error occurred during validation"}}}}};function B({activityTitle:h,isGame:d,isCityGame:m}){const r=v({resolver:k,mode:"onChange",reValidateMode:"onChange",defaultValues:{activityTitle:h,firstName:"",lastName:"",email:"",phone:"",date:"",groupSize:"",hours:"",budget:"",location:"",message:""}});p.useEffect(()=>{console.log("Form state changed:",r.formState),console.log("Form errors:",r.formState.errors)},[r.formState,r.formState.errors]);const x=async o=>{try{if(!await r.trigger()){console.log("Form validation errors:",r.formState.errors),console.log("Form state:",r.formState),await r.trigger(),setTimeout(()=>{console.log("After delay - Form errors:",r.formState.errors)},100),j.error("Vul alle verplichte velden in.");return}const g=fetch("/api/booking",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});j.promise(g,{loading:"Aanvraag verzenden...",success:()=>(r.reset(),"Bedankt voor je aanvraag! We nemen binnen 24 uur contact met je op."),error:"Er is iets misgegaan. Probeer het later opnieuw of neem contact met ons op."})}catch(u){console.error("Form submission error:",u),j.error("Er is iets misgegaan. Probeer het later opnieuw.")}};return e.jsx(b,{className:"p-8 bg-white shadow-lg hover:shadow-xl transition-all duration-300",children:e.jsx(y,{...r,children:e.jsxs("form",{onSubmit:r.handleSubmit(x),className:"space-y-8",children:[e.jsxs("div",{className:"p-4 bg-gray-100 rounded-lg text-xs",children:[e.jsx("p",{children:e.jsx("strong",{children:"Form State Debug:"})}),e.jsxs("p",{children:["Is Valid: ",r.formState.isValid?"Yes":"No"]}),e.jsxs("p",{children:["Is Dirty: ",r.formState.isDirty?"Yes":"No"]}),e.jsxs("p",{children:["Errors: ",Object.keys(r.formState.errors).length]}),e.jsxs("p",{children:["Error Keys: ",Object.keys(r.formState.errors).join(", ")]})]}),e.jsx(n,{control:r.control,name:"activityTitle",render:({field:o})=>e.jsx(a,{children:e.jsx(t,{children:e.jsx(l,{type:"hidden",...o})})})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("h3",{className:"text-2xl font-semibold",children:[d&&"Vraag een offerte aan voor deze teambuilding/game",m&&"Vraag een offerte aan voor deze city game",!d&&!m&&"Vraag een offerte aan voor deze teambuilding/activiteit"]}),e.jsx("p",{className:"text-muted-foreground",children:"Vul het formulier in en we nemen binnen 24 uur contact met je op."})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[e.jsx(n,{control:r.control,name:"firstName",render:({field:o})=>e.jsxs(a,{children:[e.jsx(i,{children:"Voornaam"}),e.jsx(t,{children:e.jsx(l,{placeholder:"John",...o})}),e.jsx(c,{})]})}),e.jsx(n,{control:r.control,name:"lastName",render:({field:o})=>e.jsxs(a,{children:[e.jsx(i,{children:"Achternaam"}),e.jsx(t,{children:e.jsx(l,{placeholder:"Doe",...o})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[e.jsx(n,{control:r.control,name:"email",render:({field:o})=>e.jsxs(a,{children:[e.jsx(i,{children:"E-mailadres"}),e.jsx(t,{children:e.jsx(l,{placeholder:"john.doe@company.com",...o})}),e.jsx(c,{})]})}),e.jsx(n,{control:r.control,name:"phone",render:({field:o})=>e.jsxs(a,{children:[e.jsx(i,{children:"Telefoonnummer"}),e.jsx(t,{children:e.jsx(l,{placeholder:"+32 123 45 67 89",...o})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[e.jsx(n,{control:r.control,name:"date",render:({field:o})=>e.jsxs(a,{children:[e.jsx(i,{children:"Gewenste datum"}),e.jsx(t,{children:e.jsx(l,{type:"date",...o})}),e.jsx(c,{})]})}),e.jsx(n,{control:r.control,name:"groupSize",render:({field:o})=>e.jsxs(a,{children:[e.jsx(i,{children:"Aantal personen"}),e.jsx(t,{children:e.jsx(l,{type:"number",placeholder:"10",...o})}),e.jsx(c,{})]})})]}),e.jsxs("div",{className:"grid sm:grid-cols-2 gap-6",children:[e.jsx(n,{control:r.control,name:"hours",render:({field:o})=>e.jsxs(a,{children:[e.jsx(i,{children:"Aantal uren"}),e.jsx(t,{children:e.jsx(l,{type:"number",placeholder:"2",...o})}),e.jsx(c,{})]})}),e.jsx(n,{control:r.control,name:"budget",render:({field:o})=>e.jsxs(a,{children:[e.jsx(i,{children:"Budget (optioneel)"}),e.jsx(t,{children:e.jsx(l,{type:"number",placeholder:"1000",...o})}),e.jsx(c,{})]})})]}),!m&&e.jsx(n,{control:r.control,name:"location",render:({field:o})=>e.jsxs(a,{children:[e.jsx(i,{children:"Locatie (laat veld blank indien Action Maker locatie moet voorzien)"}),e.jsx(t,{children:e.jsx(l,{placeholder:"Adres of stad",...o})}),e.jsx(c,{})]})}),e.jsx(n,{control:r.control,name:"message",render:({field:o})=>e.jsxs(a,{children:[e.jsx(i,{children:"Bericht"}),e.jsx(t,{children:e.jsx(N,{placeholder:"Vertel ons meer over je wensen...",className:"resize-none",...o})}),e.jsx(c,{})]})}),e.jsx(S,{type:"submit",className:"w-full bg-red-600 hover:bg-red-700 text-white group h-auto py-4 text-lg rounded-xl font-medium shadow-lg hover:shadow-xl transition-all duration-300",children:e.jsxs("span",{className:"flex items-center justify-center gap-2",children:["Verstuur aanvraag",e.jsx(w,{className:"w-5 h-5 transition-transform duration-300 group-hover:translate-x-1"})]})}),e.jsxs("p",{className:"text-sm text-center text-muted-foreground",children:["Door het formulier te versturen ga je akkoord met onze"," ",e.jsx("a",{href:"/terms-of-service",className:"text-red-600 hover:text-red-700 underline",children:"algemene voorwaarden"})]})]})})})}export{B as BookingForm};
