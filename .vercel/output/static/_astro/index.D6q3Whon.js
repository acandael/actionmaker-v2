import{r,R as x,b as T}from"./index.CvfraNNO.js";import{j as g}from"./jsx-runtime.BO2lJwvL.js";import{u as h,b as O}from"./index.DeUcLfIC.js";function G(e,t,{checkForDefaultPrevented:n=!0}={}){return function(o){if(e?.(o),n===!1||!o.defaultPrevented)return t?.(o)}}function _(e,t=[]){let n=[];function c(i,d){const s=r.createContext(d),a=n.length;n=[...n,d];const u=f=>{const{scope:C,children:m,...v}=f,N=C?.[e]?.[a]||s,p=r.useMemo(()=>v,Object.values(v));return g.jsx(N.Provider,{value:p,children:m})};u.displayName=i+"Provider";function l(f,C){const m=C?.[e]?.[a]||s,v=r.useContext(m);if(v)return v;if(d!==void 0)return d;throw new Error(`\`${f}\` must be used within \`${i}\``)}return[u,l]}const o=()=>{const i=n.map(d=>r.createContext(d));return function(s){const a=s?.[e]||i;return r.useMemo(()=>({[`__scope${e}`]:{...s,[e]:a}}),[s,a])}};return o.scopeName=e,[c,b(o,...t)]}function b(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const c=e.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(i){const d=c.reduce((s,{useScope:a,scopeName:u})=>{const f=a(i)[`__scope${u}`];return{...s,...f}},{});return r.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return n.scopeName=t.scopeName,n}function J(e){const t=e+"CollectionProvider",[n,c]=_(t),[o,i]=n(t,{collectionRef:{current:null},itemMap:new Map}),d=N=>{const{scope:p,children:E}=N,S=x.useRef(null),R=x.useRef(new Map).current;return g.jsx(o,{scope:p,itemMap:R,collectionRef:S,children:E})};d.displayName=t;const s=e+"CollectionSlot",a=O(s),u=x.forwardRef((N,p)=>{const{scope:E,children:S}=N,R=i(s,E),M=h(p,R.collectionRef);return g.jsx(a,{ref:M,children:S})});u.displayName=s;const l=e+"CollectionItemSlot",f="data-radix-collection-item",C=O(l),m=x.forwardRef((N,p)=>{const{scope:E,children:S,...R}=N,M=x.useRef(null),y=h(p,M),I=i(l,E);return x.useEffect(()=>(I.itemMap.set(M,{ref:M,...R}),()=>void I.itemMap.delete(M))),g.jsx(C,{[f]:"",ref:y,children:S})});m.displayName=l;function v(N){const p=i(e+"CollectionConsumer",N);return x.useCallback(()=>{const S=p.collectionRef.current;if(!S)return[];const R=Array.from(S.querySelectorAll(`[${f}]`));return Array.from(p.itemMap.values()).sort((I,w)=>R.indexOf(I.ref.current)-R.indexOf(w.ref.current))},[p.collectionRef,p.itemMap])}return[{Provider:d,Slot:u,ItemSlot:m},v,c]}var P=globalThis?.document?r.useLayoutEffect:()=>{},D=T[" useId ".trim().toString()]||(()=>{}),U=0;function K(e){const[t,n]=r.useState(D());return P(()=>{n(c=>c??String(U++))},[e]),t?`radix-${t}`:""}var L=T[" useInsertionEffect ".trim().toString()]||P;function Q({prop:e,defaultProp:t,onChange:n=()=>{},caller:c}){const[o,i,d]=$({defaultProp:t,onChange:n}),s=e!==void 0,a=s?e:o;{const l=r.useRef(e!==void 0);r.useEffect(()=>{const f=l.current;f!==s&&console.warn(`${c} is changing from ${f?"controlled":"uncontrolled"} to ${s?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),l.current=s},[s,c])}const u=r.useCallback(l=>{if(s){const f=j(l)?l(e):l;f!==e&&d.current?.(f)}else i(l)},[s,e,i,d]);return[a,u]}function $({defaultProp:e,onChange:t}){const[n,c]=r.useState(e),o=r.useRef(n),i=r.useRef(t);return L(()=>{i.current=t},[t]),r.useEffect(()=>{o.current!==n&&(i.current?.(n),o.current=n)},[n,o]),[n,c,i]}function j(e){return typeof e=="function"}var F=r.createContext(void 0);function X(e){const t=r.useContext(F);return e||t||"ltr"}function W(e,t){return r.useReducer((n,c)=>t[n][c]??n,e)}var k=e=>{const{present:t,children:n}=e,c=H(t),o=typeof n=="function"?n({present:c.isPresent}):r.Children.only(n),i=h(c.ref,V(o));return typeof n=="function"||c.isPresent?r.cloneElement(o,{ref:i}):null};k.displayName="Presence";function H(e){const[t,n]=r.useState(),c=r.useRef(null),o=r.useRef(e),i=r.useRef("none"),d=e?"mounted":"unmounted",[s,a]=W(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return r.useEffect(()=>{const u=A(c.current);i.current=s==="mounted"?u:"none"},[s]),P(()=>{const u=c.current,l=o.current;if(l!==e){const C=i.current,m=A(u);e?a("MOUNT"):m==="none"||u?.display==="none"?a("UNMOUNT"):a(l&&C!==m?"ANIMATION_OUT":"UNMOUNT"),o.current=e}},[e,a]),P(()=>{if(t){let u;const l=t.ownerDocument.defaultView??window,f=m=>{const N=A(c.current).includes(CSS.escape(m.animationName));if(m.target===t&&N&&(a("ANIMATION_END"),!o.current)){const p=t.style.animationFillMode;t.style.animationFillMode="forwards",u=l.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=p)})}},C=m=>{m.target===t&&(i.current=A(c.current))};return t.addEventListener("animationstart",C),t.addEventListener("animationcancel",f),t.addEventListener("animationend",f),()=>{l.clearTimeout(u),t.removeEventListener("animationstart",C),t.removeEventListener("animationcancel",f),t.removeEventListener("animationend",f)}}else a("ANIMATION_END")},[t,a]),{isPresent:["mounted","unmountSuspended"].includes(s),ref:r.useCallback(u=>{c.current=u?getComputedStyle(u):null,n(u)},[])}}function A(e){return e?.animationName||"none"}function V(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}export{k as P,J as a,G as b,_ as c,X as d,Q as e,P as f,K as u};
